<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live Sensor</title>
<style>
body {margin:0; font-family:Poppins,sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; background:linear-gradient(135deg,#0a0f24,#07182d); color:#fff;}
.card {background:rgba(255,255,255,0.1); border-radius:15px; padding:30px; text-align:center; backdrop-filter:blur(10px);}
.value {font-size:28px; margin:15px 0;}
.temp {color:#ff6b6b; animation:glowTemp 1.5s infinite alternate;}
.hum {color:#4dd2ff; animation:glowHum 1.5s infinite alternate;}
@keyframes glowTemp {0%{text-shadow:0 0 5px #ff6b6b;}100%{text-shadow:0 0 12px #ff6b6b;}}
@keyframes glowHum {0%{text-shadow:0 0 5px #4dd2ff;}100%{text-shadow:0 0 12px #4dd2ff;}}
#time {opacity:0.8;}
</style>
</head>
<body>
<div class="card">
<h1>ğŸ“¡ Live Sensor</h1>
<div id="time">--:--:--</div>
<div class="value temp">ğŸŒ¡ï¸ -- Â°C</div>
<div class="value hum">ğŸ’§ -- %</div>
</div>

<script>
function update(t,h){
  document.querySelector(".temp").innerHTML=`ğŸŒ¡ï¸ ${t} Â°C`;
  document.querySelector(".hum").innerHTML=`ğŸ’§ ${h} %`;
  document.getElementById("time").innerText=new Date().toLocaleTimeString();
}

// Initial fetch
fetch("/api/latest").then(r=>r.json()).then(d=>update(d.temperature,d.humidity)).catch(()=>console.log("No data"));

// WebSocket live updates
const ws=new WebSocket((location.protocol==="https:"?"wss://":"ws://")+window.location.host);
ws.onmessage=e=>{const d=JSON.parse(e.data); update(d.temperature,d.humidity);}

// Live clock
setInterval(()=>document.getElementById("time").innerText=new Date().toLocaleTimeString(),1000);
</script>
</body>
</html>
